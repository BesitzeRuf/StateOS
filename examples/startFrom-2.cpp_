#include <stm32f4_discovery.h>
#include <os.h>

auto led = Led();
auto tsk = Task(0, []{});

int main()
{
	tsk_flip([]
	{
		tsk_sleepNext(SEC);
		tsk.startFrom([]
		{
			ThisTask::flip([]
			{
				led.tick();
				tsk_stop();
			});
		});
		tsk.join();
	});
}
